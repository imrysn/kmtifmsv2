import{j as e,a as ye,L as ee,b as se,F as te,C as be,c as _e,d as ae,g as le}from"./index-f88750f1.js";import{N as He,S as ze}from"./index-f88750f1.js";import{r as j,b as V}from"./react-vendor-a308f804.js";import"./router-vendor-90630356.js";import"./anime-vendor-37453147.js";const De=({toggleSidebar:g,searchQuery:d,setSearchQuery:s})=>e.jsxs("header",{className:"tl-top-bar",children:[e.jsxs("button",{className:"tl-hamburger",onClick:g,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsxs("div",{className:"tl-search",children:[e.jsxs("svg",{className:"tl-search-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[e.jsx("path",{d:"M9 17C13.4183 17 17 13.4183 17 9C17 4.58172 13.4183 1 9 1C4.58172 1 1 4.58172 1 9C1 13.4183 4.58172 17 9 17Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M19 19L14.65 14.65",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("input",{type:"text",placeholder:"Search here...",value:d,onChange:r=>s(r.target.value)})]})]}),Me=({userId:g,onNotificationClick:d})=>{const[s,r]=j.useState(0),[f,_]=j.useState(!1);ye(s),j.useEffect(()=>{o();const v=setInterval(o,3e4);return()=>clearInterval(v)},[g]);const o=async()=>{try{const m=await(await fetch(`http://localhost:3001/api/notifications/user/${g}/unread-count`)).json();if(m.success){const h=m.count||0;h>s&&(_(!0),setTimeout(()=>_(!1),1e3)),r(h)}}catch(v){console.error("Error fetching unread count:",v)}};return e.jsxs("button",{className:`tl-notification-bell ${f?"pulse":""}`,onClick:d,title:"Notifications",children:[e.jsx("span",{className:"tl-bell-icon",children:"ðŸ””"}),s>0&&e.jsx("span",{className:"tl-unread-badge",children:s>99?"99+":s})]})},Le=({pendingFiles:g,teamMembers:d,calculateApprovalRate:s,submittedFiles:r=[],assignments:f=[],notifications:_=[],notificationCounts:o={overdue:0,urgent:0,pending:0},analyticsData:v=null,activeTab:m,setActiveTab:h,onNavigateToTask:L,isLoading:A=!1})=>{if(A)return e.jsxs("div",{className:"tl-content",children:[e.jsxs("div",{className:"tl-dashboard-header",children:[e.jsx("h1",{children:"Dashboard"}),e.jsx("p",{children:"Comprehensive overview of team activities and performance"})]}),e.jsx("div",{className:"tl-dashboard-actions",children:e.jsx(ee,{count:4})}),e.jsx("div",{className:"tl-dashboard-grid",children:e.jsx(ee,{count:6})})]});const S=()=>{const i=r.length,x=r.filter(u=>u.status==="approved"||u.status==="final_approved").length,w=r.filter(u=>u.status==="rejected"||u.status==="rejected_by_team_leader"||u.status==="rejected_by_admin").length,C=i-x-w;return{total:i,approved:x,rejected:w,pending:C}},R=()=>{const i=f.filter(C=>C.status==="active").length,x=f.reduce((C,u)=>C+(u.submission_count||0),0),w=f.filter(C=>{if(!C.due_date)return!1;const u=new Date(C.due_date),M=Math.ceil((u-new Date)/(1e3*60*60*24));return M>=0&&M<=7}).length;return{activeAssignments:i,totalSubmissions:x,upcomingDue:w}},P=()=>{const i=new Date,w=f.filter(y=>y.status==="active"&&y.due_date).map(y=>{const n=new Date(y.due_date),W=Math.ceil((n-i)/(1e3*60*60*24));return{...y,daysUntilDue:W,dueDate:n}}).sort((y,n)=>y.dueDate-n.dueDate),C=w.filter(y=>y.daysUntilDue<0),u=w.filter(y=>y.daysUntilDue===0),U=w.filter(y=>y.daysUntilDue>0&&y.daysUntilDue<=7),M=w.filter(y=>y.daysUntilDue>7);return[...C,...u,...U,...M].slice(0,6)},D=S(),B=R(),N=P();return e.jsxs("div",{className:"tl-content",children:[e.jsxs("div",{className:"tl-dashboard-header",children:[e.jsx("h1",{children:"Dashboard"}),e.jsx("p",{children:"Comprehensive overview of team activities and performance"})]}),e.jsxs("div",{className:"tl-dashboard-grid",children:[e.jsxs("div",{className:"tl-dashboard-card",children:[e.jsxs("div",{className:"tl-card-header",children:[e.jsx("h3",{children:"File Collection"}),e.jsx("div",{className:"tl-card-icon",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})})})]}),e.jsxs("div",{className:"tl-card-stats",children:[e.jsxs("div",{className:"tl-stat-item",children:[e.jsx("span",{className:"tl-stat-value",children:D.total}),e.jsx("span",{className:"tl-stat-label",children:"Total Submissions"})]}),e.jsxs("div",{className:"tl-stat-item",children:[e.jsx("span",{className:"tl-stat-value green",children:D.approved}),e.jsx("span",{className:"tl-stat-label",children:"Approved"})]}),e.jsxs("div",{className:"tl-stat-item",children:[e.jsx("span",{className:"tl-stat-value orange",children:D.pending}),e.jsx("span",{className:"tl-stat-label",children:"Pending"})]}),e.jsxs("div",{className:"tl-stat-item",children:[e.jsx("span",{className:"tl-stat-value red",children:D.rejected}),e.jsx("span",{className:"tl-stat-label",children:"Rejected"})]})]})]}),e.jsxs("div",{className:"tl-dashboard-card",children:[e.jsxs("div",{className:"tl-card-header",children:[e.jsx("h3",{children:"Tasks"}),e.jsx("div",{className:"tl-card-icon",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M9 11l3 3L22 4"}),e.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]})})]}),e.jsxs("div",{className:"tl-card-stats",children:[e.jsxs("div",{className:"tl-stat-item",children:[e.jsx("span",{className:"tl-stat-value",children:B.activeAssignments}),e.jsx("span",{className:"tl-stat-label",children:"Active Tasks"})]}),e.jsxs("div",{className:"tl-stat-item",children:[e.jsx("span",{className:"tl-stat-value",children:B.totalSubmissions}),e.jsx("span",{className:"tl-stat-label",children:"Total Submissions"})]}),e.jsxs("div",{className:"tl-stat-item",children:[e.jsx("span",{className:"tl-stat-value warning",children:B.upcomingDue}),e.jsx("span",{className:"tl-stat-label",children:"Due This Week"})]})]})]}),e.jsxs("div",{className:"tl-dashboard-card",children:[e.jsxs("div",{className:"tl-card-header",children:[e.jsx("h3",{children:"Team Management"}),e.jsx("div",{className:"tl-card-icon",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})})]}),e.jsxs("div",{className:"tl-card-stats",children:[e.jsxs("div",{className:"tl-stat-item",children:[e.jsx("span",{className:"tl-stat-value",children:d.length}),e.jsx("span",{className:"tl-stat-label",children:"Total Members"})]}),e.jsxs("div",{className:"tl-stat-item",children:[e.jsxs("span",{className:"tl-stat-value",children:[s(),"%"]}),e.jsx("span",{className:"tl-stat-label",children:"Approval Rate"})]}),e.jsxs("div",{className:"tl-stat-item",children:[e.jsx("span",{className:"tl-stat-value",children:g.length}),e.jsx("span",{className:"tl-stat-label",children:"Files Pending"})]})]})]}),e.jsxs("div",{className:"tl-dashboard-card large",children:[e.jsxs("div",{className:"tl-card-header",children:[e.jsx("h3",{children:"Recent Activity"}),e.jsx("div",{className:"tl-card-icon",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12,6 12,12 16,14"})]})})]}),e.jsxs("div",{className:"tl-activity-list",children:[r.slice(0,5).map((i,x)=>e.jsxs("div",{className:"tl-activity-item",children:[e.jsx("div",{className:"tl-activity-icon",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})})}),e.jsxs("div",{className:"tl-activity-content",children:[e.jsx("div",{className:"tl-activity-title",children:i.original_name}),e.jsxs("div",{className:"tl-activity-meta",children:[i.assignment_title?`Assignment: ${i.assignment_title}`:"Direct upload"," â€¢",i.username||i.fullName," â€¢",new Date(i.submitted_at||i.uploaded_at).toLocaleDateString()]})]}),e.jsx("span",{className:`status-badge status-${i.status==="approved"||i.status==="final_approved"?"approved":i.status==="rejected"||i.status==="rejected_by_team_leader"||i.status==="rejected_by_admin"?"rejected":"pending"}`,children:i.status==="approved"||i.status==="final_approved"?"Approved":i.status==="rejected"||i.status==="rejected_by_team_leader"||i.status==="rejected_by_admin"?"Rejected":i.status==="team_leader_approved"?"Pending Admin":"Pending Team Leader"})]},i.id)),r.length===0&&e.jsxs("div",{className:"tl-activity-empty",children:[e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",opacity:"0.3",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12,6 12,12 16,14"})]}),e.jsx("p",{children:"No recent activity"})]})]})]}),e.jsxs("div",{className:"tl-dashboard-card tall",children:[e.jsxs("div",{className:"tl-card-header",children:[e.jsx("h3",{children:"Priority Items"}),e.jsx("div",{className:"tl-card-icon",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("circle",{cx:"12",cy:"12",r:"4"})]})})]}),e.jsx("div",{className:"tl-priority-list",children:N.length>0?N.map(i=>{const x=i.daysUntilDue<0,w=i.daysUntilDue===0,C=i.daysUntilDue>0&&i.daysUntilDue<=7;return e.jsxs("div",{className:`tl-priority-item ${x?"overdue":w?"urgent":C?"due-soon":""}`,onClick:()=>L&&L(i.id),style:{cursor:"pointer"},children:[e.jsx("div",{className:"tl-priority-icon",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:x?e.jsxs(e.Fragment,{children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"16"})]}):e.jsxs(e.Fragment,{children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12,6 12,12 16,14"})]})})}),e.jsx("div",{className:"tl-priority-content",children:e.jsx("span",{className:"tl-priority-label",children:i.title})}),e.jsx("span",{className:"tl-priority-count",children:x?`${Math.abs(i.daysUntilDue)}d overdue`:w?"Due today":`${i.daysUntilDue}d left`})]},i.id)}):e.jsxs("div",{className:"tl-priority-empty",children:[e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",opacity:"0.3",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9 12l2 2 4-4"})]}),e.jsx("p",{children:"No upcoming deadlines"})]})})]})]})]})},Se=({submittedFiles:g,isLoading:d,openFileViewModal:s,formatFileSize:r,user:f,openMenuId:_,toggleMenu:o,handleOpenInExplorer:v,fileCollectionFilter:m,setFileCollectionFilter:h,fileCollectionSort:L,setFileCollectionSort:A,onNavigateToTask:S,highlightedFileId:R,onClearFileHighlight:P})=>{const[D,B]=j.useState(""),[N,i]=j.useState(1),[x]=j.useState(7);j.useEffect(()=>{i(1)},[D,m,L]),j.useEffect(()=>{R&&g.length>0&&setTimeout(()=>{const a=document.querySelector(`tr[data-file-id="${R}"]`);a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),a.classList.add("tl-file-highlighted"),setTimeout(()=>{a.classList.remove("tl-file-highlighted"),P&&P()},1500))},300)},[R,g]);const w=(a,E)=>{if(a){const c=a.split(".");if(c.length>1)return c[c.length-1].toLowerCase()}return E?E.replace(/^\./,"").toLowerCase():""},u=(()=>{const a=g.length,E=g.filter(T=>T.status==="approved"||T.status==="final_approved").length,c=g.filter(T=>T.status==="rejected"||T.status==="rejected_by_team_leader"||T.status==="rejected_by_admin").length,k=a-E-c;return{total:a,approved:E,rejected:c,pending:k}})(),M=(()=>{let a=g;if(D.trim()){const c=D.toLowerCase();a=a.filter(k=>k.original_name?.toLowerCase().includes(c)||k.username?.toLowerCase().includes(c)||k.fullName?.toLowerCase().includes(c)||k.team?.toLowerCase().includes(c)||k.assignment_title?.toLowerCase().includes(c))}return m!=="all"&&(a=a.filter(c=>{switch(m){case"pending":return c.status==="uploaded"||c.status==="team_leader_approved";case"approved":return c.status==="final_approved"||c.status==="approved";case"rejected":return c.status==="rejected_by_team_leader"||c.status==="rejected_by_admin"||c.status==="rejected";default:return!0}})),[...a].sort((c,k)=>{switch(L){case"date-desc":return new Date(k.submitted_at||k.uploaded_at)-new Date(c.submitted_at||c.uploaded_at);case"date-asc":return new Date(c.submitted_at||c.uploaded_at)-new Date(k.submitted_at||k.uploaded_at);case"filename-asc":return c.original_name.localeCompare(k.original_name);case"filename-desc":return k.original_name.localeCompare(c.original_name);case"user-asc":return(c.username||"").localeCompare(k.username||"");case"user-desc":return(k.username||"").localeCompare(c.username||"");default:return 0}})})(),y=j.useMemo(()=>{const a=(N-1)*x,E=a+x;return M.slice(a,E)},[M,N,x]),n=j.useMemo(()=>Math.ceil(M.length/x),[M.length,x]),W=j.useMemo(()=>{const a=[];if(n<=5)for(let c=1;c<=n;c++)a.push(e.jsx("button",{className:`pagination-btn ${c===N?"active":""}`,onClick:()=>i(c),children:c},c));else{a.push(e.jsx("button",{className:`pagination-btn ${N===1?"active":""}`,onClick:()=>i(1),children:"1"},1)),N>3&&a.push(e.jsx("span",{className:"pagination-ellipsis",children:"..."},"ellipsis1"));const c=Math.max(2,N-1),k=Math.min(n-1,N+1);for(let T=c;T<=k;T++)T!==1&&T!==n&&a.push(e.jsx("button",{className:`pagination-btn ${T===N?"active":""}`,onClick:()=>i(T),children:T},T));N<n-2&&a.push(e.jsx("span",{className:"pagination-ellipsis",children:"..."},"ellipsis2")),n>1&&a.push(e.jsx("button",{className:`pagination-btn ${n===N?"active":""}`,onClick:()=>i(n),children:n},n))}return a},[n,N]);return e.jsxs("div",{className:"tl-content",children:[e.jsxs("div",{className:"tl-page-header-with-stats",children:[e.jsxs("div",{className:"tl-page-header",children:[e.jsx("h1",{children:"File Collection"}),e.jsx("p",{children:"View all submitted files from assignments in one place"})]}),e.jsxs("div",{className:"file-status-cards",children:[e.jsxs("div",{className:"file-status-card",children:[e.jsx("div",{className:"status-icon total-icon",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"status-info",children:[e.jsx("div",{className:"status-number",children:u.total}),e.jsx("div",{className:"status-label",children:"Total Submissions"})]})]}),e.jsxs("div",{className:"file-status-card",children:[e.jsx("div",{className:"status-icon pending-icon",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"status-info",children:[e.jsx("div",{className:"status-number",children:u.pending}),e.jsx("div",{className:"status-label",children:"Pending Review"})]})]}),e.jsxs("div",{className:"file-status-card",children:[e.jsx("div",{className:"status-icon approved-icon",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"status-info",children:[e.jsx("div",{className:"status-number",children:u.approved}),e.jsx("div",{className:"status-label",children:"Approved"})]})]}),e.jsxs("div",{className:"file-status-card",children:[e.jsx("div",{className:"status-icon rejected-icon",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"status-info",children:[e.jsx("div",{className:"status-number",children:u.rejected}),e.jsx("div",{className:"status-label",children:"Rejected"})]})]})]})]}),e.jsxs("div",{className:"file-controls",children:[e.jsx("div",{className:"file-search",children:e.jsx("input",{type:"text",placeholder:"Search files by name, user, or team...",className:"search-input",value:D,onChange:a=>B(a.target.value)})}),e.jsxs("div",{className:"file-filters",children:[e.jsxs("select",{value:m,onChange:a=>h(a.target.value),className:"form-select",children:[e.jsx("option",{value:"all",children:"All Files"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsxs("select",{value:L,onChange:a=>A(a.target.value),className:"form-select",children:[e.jsx("option",{value:"date-desc",children:"Latest First"}),e.jsx("option",{value:"date-asc",children:"Oldest First"}),e.jsx("option",{value:"filename-asc",children:"Filename A-Z"}),e.jsx("option",{value:"filename-desc",children:"Filename Z-A"}),e.jsx("option",{value:"user-asc",children:"User A-Z"}),e.jsx("option",{value:"user-desc",children:"User Z-A"})]})]})]}),d?e.jsx("div",{className:"tl-files-list",children:e.jsx(se,{rows:8,columns:6})}):y.length>0?e.jsxs("div",{className:"tl-files-list",children:[e.jsxs("table",{className:"tl-files-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"File Name"}),e.jsx("th",{children:"Assignment"}),e.jsx("th",{children:"Submitted By"}),e.jsx("th",{children:"Submitted Date"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{width:"80px",textAlign:"center"},children:"Actions"})]})}),e.jsx("tbody",{children:y.map(a=>{const E=w(a.original_name,a.file_type);return e.jsxs("tr",{"data-file-id":a.id,className:"tl-clickable-row",onClick:()=>s(a),children:[e.jsx("td",{children:e.jsxs("div",{className:"file-cell",children:[e.jsx("div",{className:"file-icon",children:e.jsx(te,{fileType:E,isFolder:!1,altText:`Icon for ${a.original_name}`,size:"medium"})}),e.jsxs("div",{className:"file-details",children:[e.jsx("span",{className:"file-name",children:a.original_name}),e.jsx("span",{className:"file-size",children:r(a.file_size)})]})]})}),e.jsx("td",{children:e.jsxs("div",{className:"assignment-cell",children:[e.jsx("span",{className:"assignment-title",children:a.assignment_title}),a.assignment_due_date&&e.jsxs("span",{className:"assignment-due-date",children:["Due: ",new Date(a.assignment_due_date).toLocaleDateString()]})]})}),e.jsx("td",{children:e.jsx("div",{className:"user-cell",children:e.jsx("span",{className:"user-name",children:a.fullName||a.username})})}),e.jsx("td",{children:e.jsxs("div",{className:"datetime-cell",children:[e.jsx("div",{className:"date",children:new Date(a.submitted_at||a.uploaded_at).toLocaleDateString()}),e.jsx("div",{className:"time",children:new Date(a.submitted_at||a.uploaded_at).toLocaleTimeString()})]})}),e.jsx("td",{children:e.jsx("span",{className:`status-badge status-${a.status==="approved"||a.status==="final_approved"?"approved":a.status==="rejected"||a.status==="rejected_by_team_leader"||a.status==="rejected_by_admin"?"rejected":"pending"}`,children:a.status==="approved"||a.status==="final_approved"?"Approved":a.status==="rejected"||a.status==="rejected_by_team_leader"||a.status==="rejected_by_admin"?"Rejected":a.status==="team_leader_approved"?"Pending Admin":"Pending Team Leader"})}),e.jsx("td",{style:{textAlign:"center"},children:e.jsxs("div",{className:"tl-actions-menu-wrapper",children:[e.jsx("button",{className:"tl-menu-button",onClick:c=>o(a.id,c),title:"Options",children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[e.jsx("circle",{cx:"3",cy:"8",r:"1.5",fill:"currentColor"}),e.jsx("circle",{cx:"8",cy:"8",r:"1.5",fill:"currentColor"}),e.jsx("circle",{cx:"13",cy:"8",r:"1.5",fill:"currentColor"})]})}),_===a.id&&e.jsx("div",{className:"tl-dropdown-menu",children:a.assignment_id&&S&&e.jsxs("button",{className:"tl-dropdown-item",onClick:c=>{c.stopPropagation(),S(a.assignment_id,a.id)},children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[e.jsx("path",{d:"M5.33333 2.66667H2.66667C2.29848 2.66667 2 2.96514 2 3.33333V13.3333C2 13.7015 2.29848 14 2.66667 14H12.6667C13.0349 14 13.3333 13.7015 13.3333 13.3333V10.6667",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 2L14 4L8.66667 9.33333L6.66667 9.66667L7 7.66667L12 2Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Go to Task"]})})]})})]},a.id)})})]}),!d&&M.length>0&&e.jsxs("div",{className:"pagination-section",children:[e.jsxs("div",{className:"pagination-info",children:["Showing ",(N-1)*x+1," to ",Math.min(N*x,M.length)," of ",M.length," files"]}),n>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>i(a=>Math.max(a-1,1)),disabled:N===1,children:"â€¹"}),W,e.jsx("button",{className:"pagination-btn",onClick:()=>i(a=>Math.min(a+1,n)),disabled:N===n,children:"â€º"})]})]})]}):e.jsxs("div",{className:"tl-empty",children:[e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",style:{marginBottom:"16px",opacity:.3},children:[e.jsx("path",{d:"M24 16H13.3333C11.4924 16 10 17.4924 10 19.3333V50.6667C10 52.5076 11.4924 54 13.3333 54H50.6667C52.5076 54 54 52.5076 54 50.6667V19.3333C54 17.4924 52.5076 16 50.6667 16H40",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M40 10H24V22H40V10Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M32 32V42M32 42L37 37M32 42L27 37",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("h3",{children:"No submissions yet"}),e.jsx("p",{children:"Assignment submissions from your team will appear here"})]})]})},Ee=({isLoadingTeam:g,teamMembers:d,fetchMemberFiles:s})=>e.jsxs("div",{className:"tl-content",children:[e.jsxs("div",{className:"tl-page-header",children:[e.jsx("h1",{children:"Team Management"}),e.jsx("p",{children:"Manage your team members and their activity"})]}),g?e.jsxs("div",{className:"tl-table-container",children:[e.jsx("div",{className:"tl-table-header",children:e.jsx("h2",{children:"Team Members"})}),e.jsx(se,{rows:6,columns:6})]}):d.length>0?e.jsxs("div",{className:"tl-table-container",children:[e.jsx("div",{className:"tl-table-header",children:e.jsxs("h2",{children:["Team Members (",d.length,")"]})}),e.jsxs("table",{className:"tl-table tl-team-members-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"NAME"}),e.jsx("th",{children:"EMAIL"}),e.jsx("th",{children:"JOINED"}),e.jsx("th",{children:"FILES"}),e.jsx("th",{children:"STATUS"}),e.jsx("th",{style:{textAlign:"center"},children:"ACTIONS"})]})}),e.jsx("tbody",{children:d.map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:r.name})}),e.jsx("td",{style:{color:"var(--text-secondary)"},children:r.email}),e.jsx("td",{style:{color:"var(--text-secondary)"},children:r.joined}),e.jsx("td",{children:e.jsxs("span",{className:"tl-badge",style:{background:"#E0E7FF",color:"var(--primary-color)"},children:[r.files," files"]})}),e.jsx("td",{children:e.jsx("span",{className:`tl-badge ${r.status.toLowerCase()}`,children:r.status})}),e.jsx("td",{style:{textAlign:"center"},children:e.jsxs("button",{className:"tl-btn secondary",onClick:()=>s(r.id,r.name),title:"View member files",style:{padding:"0.5rem 1rem",fontSize:"14px"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M9 5H7C6.46957 5 5.96086 5.21071 5.58579 5.58579C5.21071 5.96086 5 6.46957 5 7V19C5 19.5304 5.21071 20.0391 5.58579 20.4142C5.96086 20.7893 6.46957 21 7 21H17C17.5304 21 18.0391 20.7893 18.4142 20.4142C18.7893 20.0391 19 19.5304 19 19V7C19 6.46957 18.7893 5.96086 18.4142 5.58579C18.0391 5.21071 17.5304 5 17 5H15M9 5C9 5.53043 9.21071 6.03914 9.58579 6.41421C9.96086 6.78929 10.4696 7 11 7H13C13.5304 7 14.0391 6.78929 14.4142 6.41421C14.7893 6.03914 15 5.53043 15 5M9 5C9 4.46957 9.21071 3.96086 9.58579 3.58579C9.96086 3.21071 10.4696 3 11 3H13C13.5304 3 14.0391 3.21071 14.4142 3.58579C14.7893 3.96086 15 4.46957 15 5M12 12H15M12 16H15M9 12H9.01M9 16H9.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"View Files"]})})]},r.id))})]})]}):e.jsxs("div",{className:"tl-empty",children:[e.jsx("h3",{children:"No team members"}),e.jsx("p",{children:"Your team currently has no members."})]})]}),Ae=({isLoadingAssignments:g,assignments:d,formatDate:s,deleteAssignment:r,setShowCreateAssignmentModal:f,openReviewModal:_,user:o,notificationCommentContext:v,onClearNotificationContext:m,highlightedAssignmentId:h,onClearHighlight:L,highlightedFileId:A,onClearFileHighlight:S})=>{const[R,P]=j.useState(!1),[D,B]=j.useState([]),[N,i]=j.useState(!1),[x,w]=j.useState(null),[C,u]=j.useState([]),[U,M]=j.useState(!1),[y,n]=j.useState(""),[W,a]=j.useState(null),[E,c]=j.useState(""),[k,T]=j.useState({}),[H,q]=j.useState(null),[ne,Z]=j.useState(!1),[z,Y]=j.useState(null),[K,ie]=j.useState({}),[re,de]=j.useState({}),J=j.useRef(!1);j.useEffect(()=>{if(console.log("ðŸ’¬ AssignmentsTab: notificationCommentContext changed:",v),console.log("   Assignments length:",d.length),v&&d.length>0){console.log("   ðŸ” Looking for assignment ID:",v.assignmentId);const t=d.find(l=>l.id===v.assignmentId);t?(console.log("   âœ… Found assignment:",t.title),console.log("   ðŸ’¡ Opening comments modal..."),v.expandAllReplies&&(J.current=!0,console.log("   ðŸ“Œ Reply notification detected - will expand after modal opens")),X(t),setTimeout(()=>{m&&(console.log("   ðŸ§¹ Clearing notification context"),m())},100)):(console.log("   âŒ Assignment not found!"),console.log("   Available assignment IDs:",d.map(l=>l.id)))}else v||console.log("   âš ï¸ No notificationCommentContext"),d.length===0&&console.log("   âš ï¸ No assignments loaded yet")},[v,d]),j.useEffect(()=>{N&&x&&J.current&&(console.log("   ðŸ”“ Modal is open, expanding all replies..."),setTimeout(()=>{if(console.log("   ðŸ“Š Found",C.length,"comments"),C.length>0){const t={};let l=null;C.forEach(p=>{p.replies&&p.replies.length>0&&(t[p.id]=!0,l||(l=p.id))}),console.log("   âœ… Expanding replies for comments:",Object.keys(t)),T(p=>({...p,...t})),l&&setTimeout(()=>{const p=document.querySelector(`[data-comment-id="${l}"]`);p&&(console.log("   ðŸ“œ Scrolling to comment:",l),p.scrollIntoView({behavior:"smooth",block:"center"}))},400)}J.current=!1},500))},[N,x,C]),j.useEffect(()=>{const t=l=>{H&&!l.target.closest(".tl-assignment-card-menu")&&q(null)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[H]),j.useEffect(()=>{h&&d.length>0&&setTimeout(()=>{const t=document.getElementById(`assignment-card-${h}`);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("tl-assignment-highlighted"),setTimeout(()=>{t.classList.remove("tl-assignment-highlighted"),L&&L()},1500))},300)},[h,d]),j.useEffect(()=>{A&&h&&d.length>0&&setTimeout(()=>{const t=document.querySelector(`[data-file-id="${A}"]`);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("tl-assignment-file-highlighted"),setTimeout(()=>{t.classList.remove("tl-assignment-file-highlighted"),S&&S()},1500))},1e3)},[A,h,d]),j.useEffect(()=>{d.forEach(t=>{G(t.id)})},[d]);const G=async t=>{try{const p=await(await fetch(`http://localhost:3001/api/assignments/${t}/comments`)).json();if(p.success){const b=(p.comments||[]).length;de($=>({...$,[t]:b}))}}catch(l){console.error("Error fetching comment count:",l)}},Q=async t=>{M(!0);try{console.log(`ðŸ” Fetching comments for assignment ${t}`);const p=await(await fetch(`http://localhost:3001/api/assignments/${t}/comments`)).json();console.log(`ðŸ’¬ Comments response for ${t}:`,p),p.success?(console.log(`âœ… Setting ${p.comments?.length||0} comments for assignment ${t}`),u(p.comments||[])):(console.log(`âŒ Failed to fetch comments for assignment ${t}`),u([]))}catch(l){console.error("Error fetching comments:",l),u([])}finally{M(!1)}},ce=async t=>{t.preventDefault();const l=y.trim();if(!(!l||!x))try{(await(await fetch(`http://localhost:3001/api/assignments/${x.id}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:o.id,username:o.username||o.fullName,comment:l})})).json()).success&&(n(""),Q(x.id),G(x.id))}catch(p){console.error("Error posting comment:",p)}},oe=async(t,l)=>{t.preventDefault();const p=E.trim();if(!(!p||!x))try{(await(await fetch(`http://localhost:3001/api/assignments/${x.id}/comments/${l}/reply`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:o.id,username:o.username||o.fullName,reply:p})})).json()).success&&(c(""),a(null),Q(x.id),G(x.id))}catch(b){console.error("Error posting reply:",b)}},he=t=>{T(l=>({...l,[t]:!l[t]}))},X=t=>{w(t),i(!0),Q(t.id)},me=()=>{i(!1),w(null),u([]),n(""),a(null),c(""),T({})},ue=t=>{ie(l=>({...l,[t]:!l[t]}))},pe=t=>{const l=new Date(t),b=Math.floor((new Date-l)/1e3);return b<60?"Just now":b<3600?`${Math.floor(b/60)}m ago`:b<86400?`${Math.floor(b/3600)}h ago`:b<604800?`${Math.floor(b/86400)}d ago`:b<2592e3?`${Math.floor(b/604800)}w ago`:s(t)},xe=t=>t?new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown",je=t=>{if(!t)return"";const b=new Date(t)-new Date,$=Math.ceil(b/(1e3*60*60*24));return $<0?`${Math.abs($)} days overdue`:$===0?"Due today":$===1?"1 day left":`${$} days left`},ve=t=>{if(!t)return"#95a5a6";const l=new Date(t),b=Math.ceil((l-new Date)/(1e3*60*60*24));return b<0?"#e74c3c":b<=2?"#f39c12":"#27ae60"},ge=t=>{if((t.assigned_to||t.assignedTo)==="all")return e.jsx("span",{className:"tl-assignment-assigned-user",children:"All team members"});const p=t.assigned_member_details||[],b=p.length;if(b===0)return e.jsx("span",{className:"tl-assignment-assigned-user",children:"No members assigned"});if(b===1)return e.jsx("span",{className:"tl-assignment-assigned-user",children:p[0].fullName||p[0].username});if(b<=4){const $=p.map(I=>I.fullName||I.username).join(", ");return e.jsx("span",{className:"tl-assignment-assigned-user",children:$})}else{const $=p.slice(0,4),I=p.slice(4),fe=$.map(O=>O.fullName||O.username).join(", "),Ne=I.map(O=>O.fullName||O.username).join(", ");return e.jsxs("span",{className:"tl-assignment-assigned-user",children:[fe,e.jsxs("span",{className:"tl-assignment-more-members","data-tooltip":Ne,children:[" ","+",I.length," more"]})]})}},F=t=>{if(!t)return"TL";if(t.includes(".")){const p=t.split(".");if(p.length>=2)return(p[0][0]+p[1][0]).toUpperCase()}const l=t.split(" ");return l.length>=2?(l[0][0]+l[1][0]).toUpperCase():t.substring(0,2).toUpperCase()};return g?e.jsx("div",{className:"tl-content",children:e.jsxs("div",{className:"tl-assignments-feed",children:[e.jsxs("div",{className:"tl-page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Tasks"}),e.jsx("p",{children:"Manage team tasks and submissions"})]}),e.jsxs("button",{className:"tl-btn success",onClick:()=>f(!0),children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:e.jsx("path",{d:"M10 4V16M4 10H16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Create Task"]})]}),e.jsx("div",{className:"tl-assignments-feed-container",children:[1,2,3,4].map(t=>e.jsx(be,{},t))})]})}):e.jsxs("div",{className:"tl-content",children:[e.jsxs("div",{className:"tl-assignments-feed",children:[e.jsxs("div",{className:"tl-page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Tasks"}),e.jsx("p",{children:"Manage team tasks and submissions"})]}),e.jsxs("button",{className:"tl-btn success",onClick:()=>f(!0),children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:e.jsx("path",{d:"M10 4V16M4 10H16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Create Task"]})]}),d.length===0?e.jsxs("div",{className:"tl-empty-state",children:[e.jsx("div",{className:"tl-empty-state-icon",children:"ðŸ“‹"}),e.jsx("h3",{children:"No tasks yet"}),e.jsx("p",{children:"Create your first task to get started"}),e.jsx("button",{className:"tl-btn success",onClick:()=>f(!0),children:"Create Task"})]}):e.jsx("div",{className:"tl-assignments-feed-container",children:d.map(t=>e.jsxs("div",{id:`assignment-card-${t.id}`,className:"tl-assignment-card",children:[e.jsxs("div",{className:"tl-assignment-card-header",children:[e.jsxs("div",{className:"tl-assignment-header-left",children:[e.jsx("div",{className:"tl-assignment-avatar",children:F(t.team_leader_username||"TL")}),e.jsxs("div",{className:"tl-assignment-header-info",children:[e.jsxs("div",{className:"tl-assignment-team-leader-info",children:[e.jsx("span",{className:"tl-assignment-team-leader-name",children:t.team_leader_fullname||t.team_leader_full_name||o.fullName||t.team_leader_username||"KMTI Team Leader"}),e.jsx("span",{className:"tl-assignments-role-badge team-leader",children:"TEAM LEADER"}),e.jsx("span",{className:"tl-assignment-assigned-to-text",children:" assigned to"}),e.jsx("span",{className:"tl-assignment-assigned-user-wrapper",children:ge(t)})]}),e.jsx("div",{className:"tl-assignment-created",children:xe(t.created_at)})]})]}),e.jsxs("div",{className:"tl-assignment-header-right",children:[(t.due_date||t.dueDate)&&e.jsxs("div",{className:"tl-assignment-due-date",children:["Due ",s(t.due_date||t.dueDate),e.jsxs("span",{className:"tl-assignment-days-left",style:{color:ve(t.due_date||t.dueDate)},children:[" ","(",je(t.due_date||t.dueDate),")"]})]}),e.jsxs("div",{className:"tl-assignment-card-menu",children:[e.jsx("button",{className:"tl-assignment-menu-btn",onClick:()=>q(H===t.id?null:t.id),title:"More options",children:"â‹®"}),H===t.id&&e.jsx("div",{className:"tl-assignment-menu-dropdown",children:e.jsx("button",{className:"tl-assignment-menu-item tl-assignment-delete-menu-item",onClick:()=>{Y({id:t.id,title:t.title}),Z(!0),q(null)},children:"Delete"})})]})]})]}),e.jsx("div",{className:"tl-assignment-task-title-section",children:e.jsx("h3",{className:"tl-assignment-title",children:t.title})}),t.description?e.jsx("div",{className:"tl-assignment-task-description-section",children:e.jsx("p",{className:"tl-assignment-description",children:t.description})}):e.jsx("div",{className:"tl-assignment-task-description-section",children:e.jsx("p",{className:"tl-assignment-no-description",children:"No description"})}),e.jsx("div",{className:"tl-assignment-attachment-section",children:t.recent_submissions&&t.recent_submissions.length>0?e.jsxs("div",{className:"tl-assignment-attached-file",children:[e.jsxs("div",{className:"tl-assignment-file-label",children:["ðŸ“Ž Submitted Files (",t.recent_submissions.length,")"]}),(K[t.id]?t.recent_submissions:t.recent_submissions.slice(0,5)).map(l=>e.jsxs("div",{"data-file-id":l.id,className:"tl-assignment-file-item",onClick:p=>{p.stopPropagation(),_&&l.id&&_(l,null)},children:[e.jsx(te,{fileType:(l.original_name||l.file_name).split(".").pop(),size:"small",className:"tl-assignment-file-icon"}),e.jsxs("div",{className:"tl-assignment-file-details",children:[e.jsx("div",{className:"tl-assignment-file-name",children:l.original_name||l.file_name}),e.jsxs("div",{className:"tl-assignment-file-meta",children:[e.jsxs("span",{children:["by ",e.jsx("span",{className:"tl-assignment-file-submitter",children:l.fullName||l.username||"Unknown"})]}),l.tag&&e.jsxs("span",{className:"tl-assignment-file-tag",children:["ðŸ·ï¸ ",l.tag]}),l.description&&e.jsx("span",{className:"tl-assignment-file-description",children:l.description}),e.jsx("span",{className:`tl-assignment-file-status ${l.status==="uploaded"?"uploaded":l.status==="team_leader_approved"?"team-leader-approved":l.status==="final_approved"?"final-approved":l.status==="rejected_by_team_leader"||l.status==="rejected_by_admin"?"rejected":"uploaded"}`,children:l.status==="uploaded"?"NEW":l.status==="team_leader_approved"?"PENDING ADMIN":l.status==="final_approved"?"âœ“ APPROVED":l.status==="rejected_by_team_leader"||l.status==="rejected_by_admin"?"âœ— REJECTED":"PENDING"})]})]})]},l.id)),t.recent_submissions.length>5&&e.jsx("button",{className:"tl-attachment-toggle-btn",onClick:()=>ue(t.id),children:K[t.id]?"See less":`See more (${t.recent_submissions.length-5} more)`})]}):e.jsxs("div",{className:"tl-assignment-no-attachment",children:[e.jsx("span",{className:"tl-assignment-no-attachment-icon",children:"â„¹ï¸"}),e.jsxs("div",{className:"tl-assignment-no-attachment-text",children:[e.jsx("strong",{children:"No submissions yet."}),"Waiting for team members to submit files."]})]})}),e.jsx("div",{className:"tl-assignment-comments-section",children:e.jsxs("button",{className:"tl-assignment-comments-text",onClick:()=>X(t),children:["Comments (",re[t.id]||0,")"]})})]},t.id))})]}),e.jsx(_e,{isOpen:N,onClose:me,assignment:x,comments:C,loadingComments:U,newComment:y,setNewComment:n,onPostComment:ce,replyingTo:W,setReplyingTo:a,replyText:E,setReplyText:c,onPostReply:oe,visibleReplies:k,toggleRepliesVisibility:he,getInitials:F,formatTimeAgo:pe,user:o}),R&&e.jsx("div",{className:"tl-modal-overlay",onClick:()=>P(!1),children:e.jsxs("div",{className:"tl-modal",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"tl-modal-header",children:[e.jsxs("h3",{children:["Assigned Members (",D.length,")"]}),e.jsx("button",{onClick:()=>P(!1),children:"Ã—"})]}),e.jsx("div",{className:"tl-modal-body",children:e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:D.map(t=>e.jsxs("div",{style:{padding:"12px",background:"var(--background-primary)",borderRadius:"var(--radius-md)",border:"1px solid var(--border-color)",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"var(--primary-color)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600",fontSize:"14px"},children:(t.fullName||t.username).charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500",color:"var(--text-primary)"},children:t.fullName||t.username}),t.fullName&&e.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:["@",t.username]})]})]},t.id))})})]})}),e.jsx(ae,{isOpen:ne,onClose:()=>{Z(!1),Y(null)},onConfirm:()=>{z&&r(z.id,z.title),Z(!1),Y(null)},title:"Delete Task",message:`Are you sure you want to delete "${z?.title}"?`,description:"This action cannot be undone. All submissions and comments associated with this task will be permanently deleted.",confirmText:"Delete Task",cancelText:"Cancel",variant:"danger"})]})},Pe=({showBulkActionModal:g,setShowBulkActionModal:d,bulkAction:s,selectedFileIds:r,bulkComments:f,setBulkComments:_,isProcessing:o,submitBulkAction:v})=>g?e.jsx("div",{className:"tl-modal-overlay",onClick:()=>d(!1),children:e.jsxs("div",{className:"tl-modal",onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"tl-modal-header",children:[e.jsxs("h3",{children:["Bulk ",s==="approve"?"Approve":"Reject"," (",r.length," files)"]}),e.jsx("button",{onClick:()=>d(!1),children:"Ã—"})]}),e.jsx("div",{className:"tl-modal-body",children:e.jsxs("div",{className:"tl-form-group",children:[e.jsxs("label",{children:["Comments ",s==="reject"&&"(Required)"]}),e.jsx("textarea",{value:f,onChange:m=>_(m.target.value),rows:"4",required:s==="reject",placeholder:s==="approve"?"Add optional comments...":"Please provide a reason for rejection..."})]})}),e.jsxs("div",{className:"tl-modal-footer",children:[e.jsx("button",{className:"tl-btn secondary",onClick:()=>d(!1),children:"Cancel"}),e.jsx("button",{className:`tl-btn ${s==="approve"?"success":"danger"}`,onClick:v,disabled:o||s==="reject"&&!f.trim(),children:o?"Processing...":`Confirm ${s}`})]})]})}):null,Re=({showFilterModal:g,setShowFilterModal:d,filters:s,setFilters:r,clearFilters:f,applyFilters:_})=>g?e.jsx("div",{className:"tl-modal-overlay",onClick:()=>d(!1),children:e.jsxs("div",{className:"tl-modal",onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"tl-modal-header",children:[e.jsx("h3",{children:"Filter Files"}),e.jsx("button",{onClick:()=>d(!1),children:"Ã—"})]}),e.jsxs("div",{className:"tl-modal-body",children:[e.jsxs("div",{className:"tl-form-group",children:[e.jsx("label",{children:"File Type"}),e.jsx("input",{type:"text",value:s.fileType.join(", "),onChange:o=>r({...s,fileType:o.target.value.split(",").map(v=>v.trim()).filter(v=>v)}),placeholder:"e.g., PDF, Word Document"})]}),e.jsxs("div",{className:"tl-form-group",children:[e.jsx("label",{children:"Submitted By"}),e.jsx("input",{type:"text",value:s.submittedBy.join(", "),onChange:o=>r({...s,submittedBy:o.target.value.split(",").map(v=>v.trim()).filter(v=>v)}),placeholder:"Username(s)"})]}),e.jsxs("div",{className:"tl-form-group",children:[e.jsx("label",{children:"Date From"}),e.jsx("input",{type:"date",value:s.dateFrom,onChange:o=>r({...s,dateFrom:o.target.value})})]}),e.jsxs("div",{className:"tl-form-group",children:[e.jsx("label",{children:"Date To"}),e.jsx("input",{type:"date",value:s.dateTo,onChange:o=>r({...s,dateTo:o.target.value})})]}),e.jsxs("div",{className:"tl-form-group",children:[e.jsx("label",{children:"Priority"}),e.jsxs("select",{value:s.priority,onChange:o=>r({...s,priority:o.target.value}),children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsx("div",{className:"tl-form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("input",{type:"checkbox",checked:s.hasDeadline,onChange:o=>r({...s,hasDeadline:o.target.checked})}),"Has Deadline"]})}),e.jsx("div",{className:"tl-form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("input",{type:"checkbox",checked:s.isOverdue,onChange:o=>r({...s,isOverdue:o.target.checked})}),"Is Overdue"]})})]}),e.jsxs("div",{className:"tl-modal-footer",children:[e.jsx("button",{className:"tl-btn secondary",onClick:f,children:"Clear All"}),e.jsx("button",{className:"tl-btn success",onClick:_,children:"Apply Filters"})]})]})}):null,Be=({showPriorityModal:g,setShowPriorityModal:d,priorityValue:s,setPriorityValue:r,dueDateValue:f,setDueDateValue:_,isProcessing:o,submitPriority:v})=>g?e.jsx("div",{className:"tl-modal-overlay",onClick:()=>d(!1),children:e.jsxs("div",{className:"tl-modal",onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"tl-modal-header",children:[e.jsx("h3",{children:"Set Priority & Deadline"}),e.jsx("button",{onClick:()=>d(!1),children:"Ã—"})]}),e.jsxs("div",{className:"tl-modal-body",children:[e.jsxs("div",{className:"tl-form-group",children:[e.jsx("label",{children:"Priority"}),e.jsxs("select",{value:s,onChange:m=>r(m.target.value),children:[e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{className:"tl-form-group",children:[e.jsx("label",{children:"Due Date"}),e.jsx("input",{type:"date",value:f,onChange:m=>_(m.target.value)})]})]}),e.jsxs("div",{className:"tl-modal-footer",children:[e.jsx("button",{className:"tl-btn secondary",onClick:()=>d(!1),children:"Cancel"}),e.jsx("button",{className:"tl-btn success",onClick:v,disabled:o,children:o?"Saving...":"Save"})]})]})}):null,$e=({showMemberFilesModal:g,setShowMemberFilesModal:d,selectedMember:s,setSelectedMember:r,memberFiles:f,setMemberFiles:_,isLoading:o,formatFileSize:v})=>{if(!g||!s)return null;const m=()=>{d(!1),r(null),_([])};return e.jsx("div",{className:"tl-modal-overlay",onClick:m,children:e.jsxs("div",{className:"tl-modal-large",onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"tl-modal-header",children:[e.jsxs("h3",{children:["Files by ",s.name]}),e.jsx("button",{onClick:m,children:"Ã—"})]}),e.jsx("div",{className:"tl-modal-body-large",children:o?e.jsxs("div",{className:"tl-loading",children:[e.jsx("div",{className:"tl-spinner"}),e.jsx("p",{children:"Loading files..."})]}):f&&f.length>0?e.jsx("div",{className:"tl-files-list",children:e.jsxs("table",{className:"tl-member-files-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"FILE NAME"}),e.jsx("th",{children:"DATE & TIME"}),e.jsx("th",{children:"TYPE"}),e.jsx("th",{children:"SIZE"}),e.jsx("th",{children:"STATUS"})]})}),e.jsx("tbody",{children:f.map(h=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("div",{className:"tl-file-name-cell",children:e.jsx("strong",{children:h.original_name})})}),e.jsx("td",{children:e.jsxs("div",{className:"tl-date-time-cell",children:[e.jsx("div",{children:new Date(h.uploaded_at||h.created_at).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})}),e.jsx("div",{className:"tl-time-text",children:new Date(h.uploaded_at||h.created_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})})]})}),e.jsx("td",{children:e.jsx("div",{className:"tl-file-type-badge",children:h.file_type?.split(" ")[0]?.slice(0,3).toUpperCase()||"FILE"})}),e.jsx("td",{children:v(h.file_size)}),e.jsx("td",{children:e.jsx("span",{className:`status-badge status-${h.status==="approved"||h.status==="final_approved"?"approved":h.status==="rejected"||h.status==="rejected_by_team_leader"||h.status==="rejected_by_admin"?"rejected":(h.current_stage?.includes("pending_admin")||h.status==="team_leader_approved","pending")}`,children:h.status==="approved"||h.status==="final_approved"?"Approved":h.status==="rejected"||h.status==="rejected_by_team_leader"||h.status==="rejected_by_admin"?"Rejected":h.current_stage?.includes("pending_admin")||h.status==="team_leader_approved"?"Pending Admin":"Pending Team Leader"})})]},h.id))})]})}):e.jsxs("div",{className:"tl-empty",children:[e.jsx("div",{className:"tl-empty-icon",children:"ðŸ“„"}),e.jsx("h3",{children:"No files"}),e.jsx("p",{children:"This team member has not uploaded any files yet."})]})})]})})},We=({showCreateAssignmentModal:g,setShowCreateAssignmentModal:d,assignmentForm:s,setAssignmentForm:r,teamMembers:f,isProcessing:_,createAssignment:o,currentUserId:v})=>{const[m,h]=V.useState(!1),[L,A]=V.useState(!1),[S,R]=V.useState({top:0,left:0,width:0}),[P,D]=V.useState({top:0,left:0,width:0}),B=V.useRef(null),N=V.useRef(null),i=[{value:"",label:"Any file type"},{value:"PDF",label:"PDF"},{value:"Word",label:"Word Document"},{value:"Excel",label:"Excel Spreadsheet"},{value:"PowerPoint",label:"PowerPoint Presentation"},{value:"Image",label:"Image Files"},{value:"Video",label:"Video Files"},{value:"Audio",label:"Audio Files"}];if(!g)return null;const x=()=>{d(!1),h(!1),A(!1),r({title:"",description:"",dueDate:"",fileTypeRequired:"",assignedMembers:[]})},w=n=>{const W=s.assignedMembers.includes(n)?s.assignedMembers.filter(a=>a!==n):[...s.assignedMembers,n];r({...s,assignedMembers:W})},C=()=>{if(s.assignedMembers.length===0)return"Select members...";if(s.assignedMembers.length===1){const n=f.find(W=>W.id===s.assignedMembers[0]);return n?n.name:"1 member selected"}return`${s.assignedMembers.length} members selected`},u=()=>{if(!m&&B.current){const n=B.current.getBoundingClientRect();R({top:n.bottom+6,left:n.left,width:n.width})}h(!m)},U=()=>{if(!L&&N.current){const n=N.current.getBoundingClientRect();D({top:n.bottom+6,left:n.left,width:n.width})}A(!L)},M=n=>{r({...s,fileTypeRequired:n}),A(!1)},y=()=>{const n=i.find(W=>W.value===s.fileTypeRequired);return n?n.label:"Any file type"};return e.jsx("div",{className:"tl-modal-overlay",onClick:x,children:e.jsxs("div",{className:"tl-modal-large",onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"tl-modal-header",children:[e.jsx("h3",{children:"Create New Task"}),e.jsx("button",{onClick:x,children:"Ã—"})]}),e.jsx("div",{className:"tl-modal-body-large",children:e.jsxs("form",{children:[e.jsxs("div",{className:"tl-form-group",children:[e.jsx("label",{children:"Task Title *"}),e.jsx("input",{type:"text",value:s.title,onChange:n=>r({...s,title:n.target.value}),placeholder:"Enter task title...",required:!0})]}),e.jsxs("div",{className:"tl-form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:s.description,onChange:n=>r({...s,description:n.target.value}),placeholder:"Enter task description...",rows:"4"})]}),e.jsxs("div",{className:"tl-form-row",children:[e.jsxs("div",{className:"tl-form-group",children:[e.jsx("label",{children:"Due Date"}),e.jsx("input",{type:"date",value:s.dueDate,onChange:n=>r({...s,dueDate:n.target.value})})]}),e.jsxs("div",{className:"tl-form-group",children:[e.jsx("label",{children:"File Type Required"}),e.jsxs("div",{className:"tl-member-dropdown-wrapper",children:[e.jsxs("button",{ref:N,type:"button",className:"tl-member-dropdown-button",onClick:U,children:[e.jsx("span",{children:y()}),e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:L?"rotated":"",children:e.jsx("path",{d:"M4 6L8 10L12 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),L&&e.jsx("div",{className:"tl-member-dropdown-menu",style:{top:`${P.top}px`,left:`${P.left}px`,width:`${P.width}px`},children:i.map(n=>e.jsx("div",{className:"tl-file-type-dropdown-item",onClick:()=>M(n.value),children:e.jsx("span",{children:n.label})},n.value))})]})]})]}),e.jsxs("div",{className:"tl-form-row",children:[e.jsxs("div",{className:"tl-form-group",children:[e.jsx("label",{children:"Assign To Members *"}),e.jsxs("div",{className:"tl-member-dropdown-wrapper",children:[e.jsxs("button",{ref:B,type:"button",className:"tl-member-dropdown-button",onClick:u,children:[e.jsx("span",{children:C()}),e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:m?"rotated":"",children:e.jsx("path",{d:"M4 6L8 10L12 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),m&&e.jsx("div",{className:"tl-member-dropdown-menu",style:{top:`${S.top}px`,left:`${S.left}px`,width:`${S.width}px`},children:f.length>0?f.map(n=>e.jsxs("label",{className:"tl-member-dropdown-item",children:[e.jsx("input",{type:"checkbox",checked:s.assignedMembers.includes(n.id),onChange:()=>w(n.id)}),e.jsxs("span",{children:[n.name,n.id===v&&e.jsx("span",{style:{marginLeft:"6px",fontSize:"12px",color:"#6B7280",fontWeight:"500"},children:"(You)"})]})]},n.id)):e.jsx("div",{className:"tl-member-dropdown-empty",children:"No team members available"})})]})]}),e.jsx("div",{className:"tl-form-group"})]}),e.jsxs("div",{className:"tl-modal-footer",children:[e.jsx("button",{type:"button",className:"tl-btn secondary",onClick:x,children:"Cancel"}),e.jsx("button",{type:"button",className:"tl-btn success",onClick:o,disabled:_||!s.title.trim()||s.assignedMembers.length===0,children:_?"Creating...":"Create Assignment"})]})]})})]})})},Ue=({showReviewModal:g,setShowReviewModal:d,selectedFile:s,reviewAction:r,setReviewAction:f,fileComments:_,reviewComments:o,setReviewComments:v,isProcessing:m,handleReviewSubmit:h,formatFileSize:L,user:A})=>{if(!g||!s)return null;const[S,R]=j.useState(!1),[P,D]=j.useState(!1),B=async()=>{R(!0);try{const U=await(await fetch("http://localhost:3001/api/files/open-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:s.file_path})})).json();U.success||alert("Failed to open file: "+(U.message||"Unknown error"))}catch(u){console.error("Error opening file:",u),alert("Failed to open file. Please try again.")}finally{R(!1)}},N=()=>{d(!1),f(null)},i=u=>{u.preventDefault(),o.trim()?h({preventDefault:()=>{}},"reject"):D(!0)},x=()=>{D(!1),h({preventDefault:()=>{}},"reject")},w=u=>{switch(u){case"uploaded":case"submitted":return"Pending Team Leader";case"team_leader_approved":return"Pending Admin";case"final_approved":return"Approved";case"rejected_by_team_leader":return"Rejected by Team Leader";case"rejected_by_admin":return"Rejected by Admin";default:return"Pending Review"}},C=u=>{switch(u){case"uploaded":case"submitted":case"team_leader_approved":return"pending";case"final_approved":return"approved";case"rejected_by_team_leader":case"rejected_by_admin":return"rejected";default:return"pending"}};return e.jsxs("div",{className:"modal-overlay",onClick:N,children:[e.jsxs("div",{className:"file-modal",onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"File Details"}),e.jsx("button",{onClick:N,className:"modal-close",children:"Ã—"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"file-details-section",children:[e.jsx("h4",{className:"section-title",children:"File Details"}),e.jsxs("div",{className:"file-details-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"FILE NAME:"}),e.jsx("span",{className:"detail-value",children:s.original_name})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"FILE TYPE:"}),e.jsx("span",{className:"detail-value",children:le(s.file_type,s.original_name)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"FILE SIZE:"}),e.jsx("span",{className:"detail-value",children:L(s.file_size)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"SUBMITTED BY:"}),e.jsx("span",{className:"detail-value",children:s.fullName||s.username})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"TEAM:"}),e.jsx("span",{className:"detail-value team-badge-inline",children:s.team||A.team})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"UPLOAD DATE:"}),e.jsx("span",{className:"detail-value",children:new Date(s.submitted_at||s.created_at||s.upload_date).toLocaleString()})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"STATUS:"}),e.jsx("span",{className:`detail-value status-badge status-${C(s.status||s.current_stage)}`,children:w(s.status||s.current_stage)})]})]})]}),s.description&&e.jsxs("div",{className:"description-section",children:[e.jsx("h4",{className:"section-title",children:"Description"}),e.jsx("div",{className:"description-box",children:e.jsx("p",{className:"description-text",children:s.description})})]}),s.status!=="team_leader_approved"&&s.status!=="final_approved"&&s.status!=="rejected_by_team_leader"&&s.status!=="rejected_by_admin"&&e.jsxs("div",{className:"comments-section",style:{marginBottom:"20px"},children:[e.jsx("h4",{className:"section-title",children:"Comments (Optional)"}),e.jsx("textarea",{value:o,onChange:u=>v(u.target.value),placeholder:"Add optional comments or rejection reason...",rows:"3",style:{width:"100%",padding:"12px",border:"1px solid #E5E7EB",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",resize:"vertical",minHeight:"80px"}})]}),(s.status==="team_leader_approved"||s.status==="final_approved"||s.status==="rejected_by_team_leader"||s.status==="rejected_by_admin")&&e.jsx("div",{className:"review-notice",style:{padding:"12px 16px",background:s.status==="team_leader_approved"?"#FEF3C7":s.status==="final_approved"?"#D1FAE5":"#FEE2E2",border:"1px solid "+(s.status==="team_leader_approved"?"#FCD34D":s.status==="final_approved"?"#34D399":"#FCA5A5"),borderRadius:"8px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",style:{color:s.status==="team_leader_approved"?"#92400E":s.status==="final_approved"?"#065F46":"#991B1B"},children:[e.jsx("path",{d:"M10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18Z",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M10 6V10M10 14H10.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),e.jsx("span",{style:{fontWeight:"500",color:s.status==="team_leader_approved"?"#92400E":s.status==="final_approved"?"#065F46":"#991B1B"},children:s.status==="team_leader_approved"?"This file has been approved by you and is now pending admin review.":s.status==="final_approved"?"This file has been fully approved and published.":"This file has been rejected and cannot be re-reviewed."})]})}),e.jsx("div",{className:"actions-section",children:e.jsxs("div",{className:"action-buttons-large",children:[e.jsxs("button",{type:"button",onClick:u=>{u.preventDefault(),h({preventDefault:()=>{}},"approve")},className:"btn btn-success-large",disabled:m||s.status==="team_leader_approved"||s.status==="final_approved"||s.status==="rejected_by_team_leader"||s.status==="rejected_by_admin",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:e.jsx("path",{d:"M16.875 5L7.5 14.375L3.125 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Approve"]}),e.jsxs("button",{type:"button",onClick:i,className:"btn btn-danger-large",disabled:m||s.status==="team_leader_approved"||s.status==="final_approved"||s.status==="rejected_by_team_leader"||s.status==="rejected_by_admin",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:e.jsx("path",{d:"M15 5L5 15M5 5L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Reject"]}),e.jsxs("button",{type:"button",onClick:B,className:"btn btn-secondary-large",disabled:m||S,children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:e.jsx("path",{d:"M10 2.5V10M10 10V17.5M10 10H17.5M10 10H2.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),S?"Opening...":"Open File"]})]})})]})]}),e.jsx(ae,{isOpen:P,onClose:()=>D(!1),onConfirm:x,title:"Reject Without Reason?",message:"You are about to reject this file without providing a reason.",confirmText:"Reject Anyway",cancelText:"Cancel",variant:"warning",isLoading:m,children:e.jsx("p",{className:"warning-text",style:{marginTop:"12px",fontSize:"14px",color:"#6B7280"},children:"Consider adding a comment to help the submitter understand why the file was rejected."})})]})},Ve=({showModal:g,setShowModal:d,selectedFile:s,formatFileSize:r,user:f})=>{if(!g||!s)return null;const _=()=>{d(!1)},o=m=>{switch(m){case"uploaded":case"submitted":return"Pending Team Leader";case"team_leader_approved":return"Pending Admin";case"final_approved":case"approved":return"Approved";case"rejected_by_team_leader":return"Rejected by Team Leader";case"rejected_by_admin":return"Rejected by Admin";case"rejected":return"Rejected";default:return"Pending Review"}},v=m=>{switch(m){case"uploaded":case"submitted":case"team_leader_approved":return"pending";case"final_approved":case"approved":return"approved";case"rejected_by_team_leader":case"rejected_by_admin":case"rejected":return"rejected";default:return"pending"}};return e.jsx("div",{className:"modal-overlay",onClick:_,children:e.jsxs("div",{className:"file-modal",onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"File Details"}),e.jsx("button",{onClick:_,className:"modal-close",children:"Ã—"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"file-details-section",children:[e.jsx("h4",{className:"section-title",children:"File Information"}),e.jsxs("div",{className:"file-details-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"FILE NAME:"}),e.jsx("span",{className:"detail-value",children:s.original_name})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"FILE TYPE:"}),e.jsx("span",{className:"detail-value",children:le(s.file_type,s.original_name)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"FILE SIZE:"}),e.jsx("span",{className:"detail-value",children:r(s.file_size)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"SUBMITTED BY:"}),e.jsx("span",{className:"detail-value",children:s.fullName||s.username})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"TEAM:"}),e.jsx("span",{className:"detail-value team-badge-inline",children:s.team||f.team})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"SUBMITTED DATE:"}),e.jsx("span",{className:"detail-value",children:new Date(s.submitted_at||s.uploaded_at||s.created_at).toLocaleString()})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"STATUS:"}),e.jsx("span",{className:`detail-value status-badge status-${v(s.status)}`,children:o(s.status)})]})]})]}),s.assignment_title&&e.jsxs("div",{className:"description-section",children:[e.jsx("h4",{className:"section-title",children:"Assignment"}),e.jsxs("div",{className:"file-details-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"TITLE:"}),e.jsx("span",{className:"detail-value",children:s.assignment_title})]}),s.assignment_due_date&&e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"DUE DATE:"}),e.jsx("span",{className:"detail-value",children:new Date(s.assignment_due_date).toLocaleDateString()})]})]})]}),s.description&&e.jsxs("div",{className:"description-section",children:[e.jsx("h4",{className:"section-title",children:"Description"}),e.jsx("div",{className:"description-box",children:e.jsx("p",{className:"description-text",children:s.description})})]}),e.jsx("div",{className:"actions-section",children:e.jsx("div",{className:"action-buttons-large",children:e.jsxs("button",{type:"button",onClick:()=>window.open(`http://localhost:3001${s.file_path}`,"_blank"),className:"btn btn-primary",style:{flex:1},children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:e.jsx("path",{d:"M15 10.8333V15.8333C15 16.2754 14.8244 16.6993 14.5118 17.0118C14.1993 17.3244 13.7754 17.5 13.3333 17.5H4.16667C3.72464 17.5 3.30072 17.3244 2.98816 17.0118C2.67559 16.6993 2.5 16.2754 2.5 15.8333V6.66667C2.5 6.22464 2.67559 5.80072 2.98816 5.48816C3.30072 5.17559 3.72464 5 4.16667 5H9.16667M12.5 2.5H17.5M17.5 2.5V7.5M17.5 2.5L8.33333 11.6667",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Open File"]})})})]})]})})};export{Ae as AssignmentsTab,Pe as BulkActionModal,We as CreateAssignmentModal,Se as FileCollectionTab,Ve as FileViewModal,Re as FilterModal,$e as MemberFilesModal,Me as NotificationBell,He as NotificationTab,Le as OverviewTab,Be as PriorityModal,Ue as ReviewModal,ze as Sidebar,Ee as TeamManagementTab,De as TopBar};
